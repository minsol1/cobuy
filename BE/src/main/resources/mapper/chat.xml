<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cobuy.BE.chat.model.mapper.ChatMapper">
    <resultMap id="Message" type="message">
        <result column="room_id" property="roomId"/>
        <result column="message_id" property="messageId"/>
        <result column="user_id" property="userId"/>
        <result column="message" property="message"/>
        <result column="send_time" property="sendTime"/>
    </resultMap>

    <insert id="createChatRoom" parameterType="chatroom">
        insert into chatroom(room_id, room_name,create_time)
        values (#{roomId},#{roomName},now())
    </insert>

    <insert id="enterChatRoom" parameterType="java.util.Map">
        insert into chatuser(room_id, user_id)
        values (#{roomId},#{userId})
    </insert>

    <insert id="sendMessage" parameterType="message">
        insert into message(room_id,message_id,user_id,message,send_time)
        values (#{roomId},#{messageId},#{userId},#{message},now())
    </insert>


</mapper>